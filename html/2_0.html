<!doctype html><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../file/c.css" media="all"><title>python是什么?</title></head><body>
<a id="bar" href="index.html">返回目录</a>
<div id="header">
<h1>Why CouchDB是什么啊?</h1>
</div>

<div id="preamble">
<div class="sectionbody">
<p>Apache CouchDB is one of a new breed of database management systems. This chapter explains why there&#x2019;s a need for new systems as well as the motivations behind building CouchDB.</p>
<p>As CouchDB developers we&#x2019;re naturally very excited to be using CouchDB. In this chapter we&#x2019;ll share with you the reasons for our enthusiasm. We&#x2019;ll show you how CouchDB&#x2019;s schema-free document model is a better fit for common applications, how the built-in query engine is a powerful way to use and process your data, and how CouchDB&#x2019;s design lends itself to modularization and scalability.</p>

</div>
</div>
<h2>Relax</h2>
<div class="sectionbody">
<p>If there&#x2019;s one phrase to describe CouchDB it is <em>relax</em>. It is in the title of this book, it is the byline to CouchDB&#x2019;s official logo and when you start CouchDB you see:</p>
<div class="listingblock">
<div class="content">
<pre><tt>Apache CouchDB has started. Time to relax.</tt></pre>
</div></div>
<p>Why is relaxation important? Developer productivity roughly doubled in the last five years. The chief reason for the boost are more powerful tools that are easier to use. Take Ruby on Rails as an example. It is an infinitely complex framework, but pretty easy to get going with. Rails is a success story because of the core design focus on ease of use. This is one reason why CouchDB is relaxing: learning CouchDB, understanding its core concepts should feel natural to most everybody who has been doing any work on The Web. And it is still pretty easy to explain to nontechnical people.</p>

<p>Getting out of the way when creative people try to build specialized solutions is in itself a core feature and one thing that CouchDB aims to get right. We found existing tools too cumbersome to deal with during development or in production and decided to focus on making CouchDB easy, even a pleasure, to use. The chapters <em>Getting Started</em> and <em>The Core API</em> will demonstrate the intuitive HTTP-based REST API.</p>
<p>Another area of relaxation for CouchDB users is the production setting. If you have a live running application, CouchDB again goes out of its way to avoid troubling you. It&#x2019;s internal architecture is fault tolerant, failures occur in a controlled environment and are dealt with gracefully. Single problems do not cascade through an entire server system but stay isolated in single requests.</p>
<p>CouchDB&#x2019;s core concepts are simple (yet powerful) and well understood. Operations teams (if you have one, otherwise, that&#x2019;s you) do not have to fear random behaviour and untraceable errors. If anything should go wrong, you can pretty easily find out what the problem is, but these situations are rare.</p>
<p>CouchDB is also designed to handle varying traffic gracefully. Say you have web site experiencing a sudden spike in traffic. CouchDB generally absorbs a lot of concurrent requests without falling over; instead, it takes a little more time for each request to finish, but they all get answered. When the spike is over, CouchDB will work faster again.</p>

<p>The third area of relaxation is growing and shrinking the underlying hardware of your application. This is commonly referred to as scaling. CouchDB enforces a set of limits on the programmer. On first look, CouchDB might seem inflexible at times, but some things are simply left out by design for the simple reason that if CouchDB would support them, it would allow a programmer to create applications that can&#x2019;t deal with scale. Where scaling, again, can mean growing up or shrinking down on hardware. We&#x2019;ll explore the whole matter of scaling CouchDB in <em>Part IV Deploying CouchDB</em>.</p>
<p>In a nutshell: CouchDB doesn&#x2019;t let you do what would get you in trouble later on. This sometimes means unlearning best-practices you might have picked up in your current or past work. <em>Part V Receipts</em> contains a list of common tasks and how to solve them in CouchDB.</p>
</div>
<h2>A Different Way to Model Your Data</h2>
<div class="sectionbody">
<p>We believe that CouchDB will drastically change the way that you build document-based applications. CouchDB combines an intuitive document storage model with a powerful query engine in a way that&#x2019;s so simple you&#x2019;ll probably be tempted to ask &#8220;Why has no one built something like this before?&#8221;</p>

<div class="quoteblock">
<div class="content">
<p>&#8220;Django may be built <em>for</em> the Web, but CouchDB is built <em>of</em> the Web. I&#x2019;ve never seen software that so completely embraces the philosophies behind HTTP. CouchDB makes Django look old-school in the same way that Django makes ASP look outdated.&#8221;</p>
</div>
<div class="attribution">
&#8212; <em>Jacob Kaplan-Moss</em>, Django Developer

</div></div>
<p>CouchDB&#x2019;s design borrows heavily from Web architecture and the concepts of resources, methods and representations. It augments this with powerful ways to query, map, combine and filter your data. Add fault-tolerance, extreme scalability, and incremental replication, and CouchDB defines a sweet spot for document databases.</p>
</div>
<h2>A Better Fit for Common Applications</h2>
<div class="sectionbody">
<p>We write software to improve our lives and the lives of others. Usually this involves taking some mundane information such as contacts, invoices or receipts and manipulating it using a computer application. CouchDB is a great fit for common applications like this because it embraces the natural idea of evolving, self-contained documents as the very core of its data model.</p>
<h3>Self-Contained Data</h3><div style="clear:left"></div>
<p>An invoice contains all the pertinent information about a single transaction; the seller, the buyer, the date, and a list of the items or services sold. As shown in <em>Figure 1-1</em>, there&#x2019;s no abstract reference on this piece of paper that points to some other piece of paper with the seller&#x2019;s name and address. Accountants appreciate the simplicity of having everything in one place. And given the choice, programmers appreciate that, too.</p>

<div class="imageblock">
<div class="content">
<img src="http://books.couchdb.org/relax/intro/01-01.png" alt="01-01.png"/>
</div>
<div class="image-title">Figure 1-1: Self-contained documents</div>
</div>
<p>Yet this is exactly how we model our data in a relational database! Each invoice is stored in a table as a row that refers to other rows in other tables: one row for seller information, one for the buyer, one row for each item billed, and yet more rows still to describe the item details, manufacturer details and so on and so forth.</p>
<p>This isn&#x2019;t meant as a detraction of the relational model, which is widely applicable and extremely useful for a number of reasons. Hopefully, though, it illustrates the point that sometimes your model may not &#8220;fit&#8221; your data in the way you&#x2019;d like.</p>
<p>Let&#x2019;s take a look at the humble contact database, to illustrate a different way of modeling data, one that more closely &#8220;fits&#8221; its real-world counterpart: a pile of business cards. Much like our invoice example, a business card contains all the important information, right there on the cardstock. We call this &#8220;self contained&#8221; data, and it&#x2019;s an important concept in understanding document databases like CouchDB.</p>

<h3>Syntax and Semantics</h3><div style="clear:left"></div>
<p>Most business cards contain roughly the same information: someone&#x2019;s identity, an affiliation, and some contact information. While the exact form of this information can vary between business cards, the general information being conveyed remains the same and we&#x2019;re easily able to recognize it as a business card. In this sense, we can describe a business card as a <em>real-world document</em>.</p>
<p>Jan&#x2019;s business card might contain a phone number but no fax whereas Chris&#x2019;s business card contains both a phone number and fax. Jan does not have to make his lack of a fax machine explicit by writing something as ridiculous as &#8220;Fax: None&#8221; on the business card. Instead, by simply omitting a fax number it&#x2019;s implied that he doesn&#x2019;t have one.</p>

<p>We can see that real-world documents of the same type, such as business cards, tend to be very similar in <em>semantics</em>, the sort of information they carry, but can vary hugely in <em>syntax</em>, how that information is structured. As human beings, we&#x2019;re naturally comfortable dealing with this kind of variation.</p>
<p>While a traditional relational database requires you to model your data <em>up front</em>, CouchDB&#x2019;s schema-free design unburdens you with a powerful way to aggregate your data <em>after the fact</em>, just like we do with real-world documents. We&#x2019;ll look in depth at how to design applications with this underlying storage paradigm.</p>

</div>
<h2>Building blocks for larger systems</h2>
<div class="sectionbody">
<p>CouchDB is a storage system useful on its own. You can build many applications with the tools CouchDB gives you. But CouchDB is designed with a bigger picture in mind. Its components can be used as building blocks for systems larger and more complex that solve the storage problem in slightly different ways.</p>
<p>Whether you need a system that&#x2019;s crazy fast that isn&#x2019;t too concerned with reliability (think logging) or one that guarantees storage in two or more physically separated locations for reliability, but you&#x2019;re willing to take a performance hit, since reliability is more important, CouchDB lets you build these systems.</p>
<p>There are a multitude of knobs you could turn to make a system work better in one area, but you&#x2019;ll affect another area while doing so. One first example would be the CAP theorem discussed in the next chapter. To give you an idea of other things that affect a storage systems see Figures 1-8 and 1-9:</p>
<div class="imageblock">
<div class="content">
<img src="http://books.couchdb.org/relax/intro/01-09.png" alt="01-09.png"/>

</div>
<div class="image-title">Figure 1-9: Throughput, Latency &amp; Concurrency</div>
</div>
<p>By reducing latency for a given system (and that is true not only for storage systems), you affect concurrency and throughput capabilities.</p>
<div class="imageblock">
<div class="content">
<img src="http://books.couchdb.org/relax/intro/01-08.png" alt="01-08.png"/>
</div>
<div class="image-title">Figure 1-8: Scaling: Read Requests, Write Requests or Data</div>
</div>
<p>When you want to scale out, there are three distinct issues to deal with: Scaling read requests, write requests and data. Orthogonal to all three and to the items shown above are many more attributes like reliability or simplicity. You can draw many of these graphs that show different features or attributes pull into different directions and thus shape the system they describe.</p>

<p>CouchDB is very flexible and gives you enough building blocks to make system shaped to suit your exact problem. That&#x2019;s not saying that CouchDB can be bent to solve any problem: CouchDB is no silver bullet, but in the space of data storage it can get you a long way.</p>
<h3>CouchDB Replication</h3><div style="clear:left"></div>
<p>CouchDB replication is one of these building blocks. Its fundamental function is to synchronize two or more CouchDB databases. This may sound simple, byt the simplicity is key to allowing replication to solve a number of problems: reliably synchronize databases between multiple machines for redundant data storage; distributing data to a cluster of CouchDB instances that share a subset of the total number of requests that hit the cluster (load balancing); distributing data between physically-apart locations, like one office in New York and another one in Tokyo.</p>
<p>CouchDB replication uses the same REST API all clients use. HTTP is ubiquitous and well understood. Replication works incremental, that is, if during replication anything goes wrong, like a dropping network connection, it will pick up where it left off the next time it runs. It also only transfers data that is needed to synchronize databases.</p>
<p>A core assumption CouchDB makes is that things can go wrong, it is designed for graceful error recovery instead of assuming all will be well. The replication system&#x2019;s incremental design shows that best. The ideas behind &#8220;things that can go wrong&#8221; are embodied in Fallacies of Distributed Computing (<a href="http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing">http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing</a>):</p>

<div class="olist"><ol>
<li>
<p>
The network is reliable.
</p>
</li>
<li>
<p>
Latency is zero.
</p>
</li>
<li>
<p>
Bandwidth is infinite.
</p>
</li>
<li>

<p>
The network is secure.
</p>
</li>
<li>
<p>
Topology doesn&#x2019;t change.
</p>
</li>
<li>
<p>
There is one administrator.
</p>
</li>
<li>
<p>

Transport cost is zero.
</p>
</li>
<li>
<p>
The network is homogeneous.
</p>
</li>
</ol></div>
<p>Existing tools often try to hide that there is a network and that any or all of the above conditions don&#x2019;t exist for a particular system. This usually results in fatal error scenarios when finally something goes wrong. Instead CouchDB doesn&#x2019;t try to hide the network, it just handles errors gracefully and lets you know when actions on your end are required.</p>
</div>
<h2>Local Data is King</h2>
<div class="sectionbody">

<p>CouchDB takes quite a few <em>lessons learned</em> from The Web, but there is one thing that sucks about the web: latency. Whenever you have to wait for an application to respond or a website to render you almost always wait for a network connection that isn&#x2019;t as fast as you want it at that point. Waiting a few seconds instead of milliseconds greatly influences user experience and thus user-satisfaction.</p>
<p>Worse: what do you do when you are offline. This happens all the time, your DSL or cable provider has issues, your iPhone, G1 or Blackberry has <em>no bars</em>. No connectivity, no way to get to your data.</p>
<p>CouchDB can solve this scenario as well and this is where scaling is important again. This time it is scaling down. Imagine CouchDB installed on phones and other mobile devices that can synchronize data with centrally hosted CouchDB&#x2019;s when they are on a network. The synchronization is not bound by user interface contraints like sub-second response times. It is easier to tune for high bandwidth and higher latency than for low bandwidth and very low latency. Mobile applications can then use the local CouchDB to fetch data and since no remote networking is required for that, latency is low by default.</p>
<p>But CouchDB on a phone, can it be done? Erlang, CouchDB&#x2019;s implementation language has been designed to run on embedded devices magnitudes smaller and less powerful than today&#x2019;s phones.</p>

</div>
<h2>Wrapping Up</h2>
<div class="sectionbody">
<p>The next chapter further explores the distributed nature of CouchDB. We should have given you enough bites to whet your interest. Let&#x2019;s go!</p>




<div class="dirnav">
<a href="#">上一节</a>
<a href="index.html">返回目录</a>
<a href="#">下一节</a>
</div>

</div>

    <script type="text/javascript" src="../file/c.js"></script>
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://books.couchdb.org/piwik/" : "http://books.couchdb.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    piwik_action_name = '';
    piwik_idsite = 1;
    piwik_url = pkBaseURL + "piwik.php";
    piwik_log(piwik_action_name, piwik_idsite, piwik_url);
    </script>

    <!-- End Piwik Tag -->
<div id="footer">
  <p class="copyright">
    Copyright 2009,
    <a href="http://jchris.mfdz.com/">张沈鹏</a>,
    <a href="http://jan.prima.de/">陈寅</a>

    <span class="amp">&amp;</span>
    <a href="http://tumbolia.org/nslater">敬宓</a>
  </p>
</div>
</body></html>




